<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>工程化面试相关 | Ories的博客</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="别人写的blog 1. 常见 loader 和 plugin 有哪些？二者区别是什么？   常见 loader 在 webpack 文档里写了：传送门
  必须记住的一些loader
    babel-loader 把 JS/TS 变成 JS
  ts-loader 把 TS 变成 JS，并提示类型错误 md相关
  markdown-loader 把 markdown 变成 html
  html-loader 把 html 变成 JS 字符串 css 相关
  sass-loader 把 SASS/SCSS 变成 CSS
  css-loader 把 CSS 变成 JS 字符串
  style-loader 把 JS 字符串变成 style 标签">
    <meta name="generator" content="Hugo 0.79.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    
      

    

    
    
    <meta property="og:title" content="工程化面试相关" />
<meta property="og:description" content="别人写的blog 1. 常见 loader 和 plugin 有哪些？二者区别是什么？   常见 loader 在 webpack 文档里写了：传送门
  必须记住的一些loader
    babel-loader 把 JS/TS 变成 JS
  ts-loader 把 TS 变成 JS，并提示类型错误 md相关
  markdown-loader 把 markdown 变成 html
  html-loader 把 html 变成 JS 字符串 css 相关
  sass-loader 把 SASS/SCSS 变成 CSS
  css-loader 把 CSS 变成 JS 字符串
  style-loader 把 JS 字符串变成 style 标签" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/" />
<meta property="article:published_time" content="2022-10-24T15:51:08+08:00" />
<meta property="article:modified_time" content="2022-10-24T15:51:08+08:00" />
<meta itemprop="name" content="工程化面试相关">
<meta itemprop="description" content="别人写的blog 1. 常见 loader 和 plugin 有哪些？二者区别是什么？   常见 loader 在 webpack 文档里写了：传送门
  必须记住的一些loader
    babel-loader 把 JS/TS 变成 JS
  ts-loader 把 TS 变成 JS，并提示类型错误 md相关
  markdown-loader 把 markdown 变成 html
  html-loader 把 html 变成 JS 字符串 css 相关
  sass-loader 把 SASS/SCSS 变成 CSS
  css-loader 把 CSS 变成 JS 字符串
  style-loader 把 JS 字符串变成 style 标签">
<meta itemprop="datePublished" content="2022-10-24T15:51:08+08:00" />
<meta itemprop="dateModified" content="2022-10-24T15:51:08+08:00" />
<meta itemprop="wordCount" content="388">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="工程化面试相关"/>
<meta name="twitter:description" content="别人写的blog 1. 常见 loader 和 plugin 有哪些？二者区别是什么？   常见 loader 在 webpack 文档里写了：传送门
  必须记住的一些loader
    babel-loader 把 JS/TS 变成 JS
  ts-loader 把 TS 变成 JS，并提示类型错误 md相关
  markdown-loader 把 markdown 变成 html
  html-loader 把 html 变成 JS 字符串 css 相关
  sass-loader 把 SASS/SCSS 变成 CSS
  css-loader 把 CSS 变成 JS 字符串
  style-loader 把 JS 字符串变成 style 标签"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Ories的博客
      
    </a>
    <div class="flex-l items-center">
      

      
      















    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=http://example.org/posts/%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=http://example.org/posts/%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/&amp;text=%e5%b7%a5%e7%a8%8b%e5%8c%96%e9%9d%a2%e8%af%95%e7%9b%b8%e5%85%b3" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://example.org/posts/%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/&amp;title=%e5%b7%a5%e7%a8%8b%e5%8c%96%e9%9d%a2%e8%af%95%e7%9b%b8%e5%85%b3" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">工程化面试相关</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-10-24T15:51:08+08:00">October 24, 2022</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h3 id="别人写的bloghttpsjuejincnpost7136597580292554766">别人写的<a href="https://juejin.cn/post/7136597580292554766">blog</a></h3>
<h3 id="1-常见-loader-和-plugin-有哪些二者区别是什么">1. 常见 loader 和 plugin 有哪些？二者区别是什么？</h3>
<ul>
<li>
<p>常见 loader
在 webpack 文档里写了：<a href="https://webpack.js.org/loaders/">传送门</a></p>
</li>
<li>
<p>必须记住的一些loader</p>
</li>
</ul>
<ol>
<li>
<p>babel-loader 把 JS/TS 变成 JS</p>
</li>
<li>
<p>ts-loader 把 TS 变成 JS，并提示类型错误
md相关</p>
</li>
<li>
<p>markdown-loader 把 markdown 变成 html</p>
</li>
<li>
<p>html-loader 把 html 变成 JS 字符串
css 相关</p>
</li>
<li>
<p>sass-loader 把 SASS/SCSS 变成 CSS</p>
</li>
<li>
<p>css-loader 把 CSS 变成 JS 字符串</p>
</li>
<li>
<p>style-loader 把 JS 字符串变成 style 标签</p>
</li>
<li>
<p>postcss-loader 把 CSS 变成更优化的 CSS，最好放在css-loader之前</p>
</li>
<li>
<p>vue-loader 把单文件组件（SFC）变成 JS 模块</p>
</li>
<li>
<p>thread-loader 用于多进程打包</p>
</li>
</ol>
<ul>
<li>
<p>常见 plugin</p>
<ul>
<li>也在 webpack 文档里写了：<a href="https://webpack.js.org/plugins/">传送门</a></li>
</ul>
</li>
<li>
<p>必须记住的一些plugin</p>
<ol>
<li>html-webpack-plugin 用于创建 HTML 页面并自动引入 JS 和 CSS</li>
<li>clean-webpack-plugin 用于清理之前打包的残余文件</li>
<li>mini-css-extract-plugin 用于将 JS 中的 CSS 抽离成单独的 CSS 文件</li>
<li>SplitChunksPlugin 用于代码分包（Code Split）</li>
<li>DllPlugin + DllReferencePlugin 用于避免大依赖被频繁重新打包，大幅降低打包时间，具体如何使用，<a href="https://segmentfault.com/a/1190000016567986">传送门</a>，其实也可以通过分包去做，具体场景比如引入打包vue，不重复打包</li>
<li>eslint-webpack-plugin 用于检查代码中的错误</li>
<li>DefinePlugin 用于在 webpack config 里添加全局变量</li>
<li>copy-webpack-plugin 用于拷贝静态文件到 dist</li>
</ol>
</li>
<li>
<p>loader和plugin二者的区别</p>
<ul>
<li>loader 是文件加载器（这句废话很重要）
<ul>
<li>功能：能够对文件进行编译、优化、混淆（压缩）等，比如 babel-loader, vue-loader</li>
<li>运行时机：在创建最终产物之前运行，loader是在解析出文件路径之后，把文件加载之后就运行loader，运行完之后再生成新的文件</li>
</ul>
</li>
<li>plugin 是 webpack 插件（这句废话也很重要）
<ul>
<li>功能：能实现更多功能，比如定义全局变量、Code Split、加速编译，代码分包等</li>
<li>运行时机：在整个打包过程（以及前后）都能运行</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-webpack-如何解决开发时的跨域问题">2. webpack 如何解决开发时的跨域问题？</h3>
<p>在开发时，我们的页面在 localhost:8080 ，JS 直接访问后端接口（如 xiedaimala.com 或 http://localhost:3000 ）会报跨域错误。
为了解决这个问题，可以在 webpack.config.js 中添加如下配置：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> {
    <span style="color:#75715e">//...
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">devServer</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">proxy</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#39;/api&#39;</span><span style="color:#f92672">:</span> {
                <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;http://xiedaimala.com&#39;</span>,
                <span style="color:#a6e22e">changeOrigin</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
            },
        },
    },
};
</code></pre></div><p>此时，在 JS 中请求 /api/users 就会自动被代理到 xiedaimala.com/api/users 。
可能的追问: 如果希望请求中的 Origin 从 8080 修改为 xiedaimala.com，可以添加 changeOrigin:true 。
可能的追问: 如果要访问的是 HTTPS API，那么就需要配置 HTTPS 证书，否则会报错。 不过，如果在 target 下面添加 secure: false ，就可以不配置证书且忽略 HTTPS 报错。
总之，记住常用选项就行了。</p>
<h3 id="3-如何实现-tree-shaking">3. 如何实现 tree-shaking？</h3>
<p>[英文文档] (<a href="https://webpack.js.org/guides/tree-shaking/#conclusion">https://webpack.js.org/guides/tree-shaking/#conclusion</a>)
[中文文档] (<a href="https://webpack.docschina.org/guides/tree-shaking/#conclusion">https://webpack.docschina.org/guides/tree-shaking/#conclusion</a>)</p>
<p>tree-shaking 是什么?</p>
<ul>
<li>tree-shaking就是让没有用到的js不打包，以减少包的体积</li>
</ul>
<p>tree-shaking 具体怎么做</p>
<ol>
<li>
<p>怎么删
a. 使用 ES Modules 语法（即 ES6 的 import 和 export 关键字）
b. CommonJS 语法无法 tree-shaking（即 require 和 exports 语法）</p>
<ul>
<li>需要给babel-loader添加modules: false徐昂想
c. 引入的时候只引用需要的模块</li>
<li>要写 import {cloneDeep} from &lsquo;lodash-es&rsquo; 因为方便 tree-shaking，注意后面是-es，表示这个库是es module写的</li>
<li>不要写 import _ from &lsquo;lodash&rsquo; 因为会导致无法 tree-shaking 无用模块</li>
</ul>
</li>
<li>
<p>怎么不删：在 package.json 中配置 sideEffects，防止某些文件被删掉，
a. 比如我 import 了 x.js，而 x.js 只是添加了 window.x 属性，那么 x.js 就要放到sideEffects 里，修改window就是副作用，简单来说副作用就是环境进行的修改。换言之，不依赖环境，每次运行的结果都一样的代码就是无副作用的代码。
b. 比如所有被 import 的 CSS 都要放在 sideEffects 里</p>
</li>
<li>
<p>怎么开启：在 webpack config 中将 mode 设置为 production（开发环境没必要tree-shaking）</p>
<ul>
<li>mode: production 给 webpack 加了非常多优化。</li>
</ul>
</li>
</ol>
<h3 id="4-如何提高-webpack-构建速度">4. 如何提高 webpack 构建速度？</h3>
<p>传送门：<a href="https://webpack.docschina.org/guides/build-performance/">webpack 文档</a></p>
<ol>
<li>使用 DllPlugin 将不常变化的代码提前打包，并复用，如 vue、react</li>
<li>使用 thread-loader 或 HappyPack（过时）进行多线程打包</li>
<li>处于开发环境时，在 webpack config 中将 cache 设为 true，也可用 cacheloader（过时）</li>
<li>处于生产环境时，关闭不必要的环节，比如可以关闭 source map</li>
<li>网传的 HardSourceWebpackPlugin 已经一年多没更新了，谨慎使用</li>
</ol>
<h3 id="5-webpack-与-vite-的区别是什么">5. webpack 与 vite 的区别是什么？</h3>
<ol>
<li>开发环境区别
a. vite 自己实现 server，不对代码打包，充分利用浏览器对<code>&lt;script type=module&gt;</code>的支持
<ul>
<li>假设 main.js 引入了 vue</li>
<li>该 server 会把 <code>import { createApp } from 'vue'</code> 改为 <code>import { createApp } from &quot;/node_modules/.vite/vue.js&quot;</code> 这样浏览器就知道去哪里找 vue.js 了
b. webpack-dev-server 常使用 babel-loader 基于内存打包，比 vite 慢很多很多很多</li>
<li>该 server 会把 vue.js 的代码（递归地）打包进 main.js</li>
</ul>
</li>
</ol>
<p>生产环境区别</p>
<p>vite 使用 rollup + esbuild 来打包 JS 代码
vite 使用 rollup + esbuild 来打包 JS 代码</p>
<p>webpack 能使用 esbuild 吗？可以，你要自己配置（很麻烦）</p>
<p>文件处理时机</p>
<p>vite 只会在你请求某个文件的时候处理该文件
webpack 会提前打包好 main.js，等你请求的时候直接输出打包好的 JS 你</p>
<p>目前已知 vite 的缺点有：</p>
<p>热更新常常失败，原因不清楚
有些功能 rollup 不支持，需要自己写 rollup 插件
不支持非现代浏览器</p>
<p>作者：嗨慢走
链接：https://juejin.cn/post/7136597580292554766
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy;  Ories的博客 2022 
  </a>
    <div>














</div>
  </div>
</footer>

  </body>
</html>
